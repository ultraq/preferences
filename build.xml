<?xml version="1.0" encoding="UTF-8"?>

<project name="Preferences" default="bundle">
	<description>
		Builds a JAR file of the Preferences project.
	</description>

	<property name="project.name"      value="Preferences"/>
	<property name="project.shortname" value="preferences"/>
	<property name="project.version"   value="1.2"/>
	<property name="build.name"        value="${project.shortname}-${project.version}"/>

	<!-- Create the JAR file -->
	<target name="jar">
		<jar basedir="Classes" destfile="${build.name}.jar">
			<manifest>
				<attribute name="Implementation-Title" value="${project.name}"/>
				<attribute name="Implementation-Version" value="${project.version}"/>
				<attribute name="Implementation-Vendor" value="Emanuel Rabina"/>
				<attribute name="Implementation-URL" value="http://www.ultraq.net.nz/${project.shortname}/"/>
			</manifest>
		</jar>
	</target>

	<!-- Create the source archive -->
	<target name="source">
		<zip basedir="Java" destfile="${build.name}-src.zip"/>
	</target>

	<!-- Create the overall distribution archive -->
	<target name="bundle" depends="jar, source">
		<copy todir="${build.name}">
			<fileset dir=".">
				<include name="${build.name}.jar"/>
				<include name="${build.name}-src.zip"/>
			</fileset>
		</copy>
		<zip basedir="${build.name}" destfile="${project.name} ${project.version}.zip"/>
		<delete dir="${build.name}"/>
	</target>

</project>
